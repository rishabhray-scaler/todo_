<div class="row clearfix">
    <%# Use button_to (server-rendered form) so actions work even when UJS is not loaded in JS
            link_to with `method:` relies on Rails UJS to convert the link to non-GET requests. In this
            app the JS driver isn't present, so the data-method was being treated as a GET and routes
            failed. button_to creates a small form and works without extra JS. %>
    <% if todo_item.completed? %>
        <div class="complete">
            <%= button_to "Mark as Complete", complete_todo_list_todo_item_path(@todo_list, todo_item), method: :patch, form: { style: 'display:inline' }, class: 'link-like' %>
        </div>

        <div class="todo_item">
            <p style="opacity: 0.4;"><strike><%= todo_item.content %></strike></p>
        </div>

        <div class="trash">
            <%= button_to "Delete", todo_list_todo_item_path(@todo_list, todo_item), method: :delete, data: { confirm: "Are you sure?" }, form: { style: 'display:inline' }, class: 'link-like trash-btn' %>
        </div>
    <% else %>
        <div class="complete">
            <%= button_to "Mark as Complete", complete_todo_list_todo_item_path(@todo_list, todo_item), method: :patch, form: { style: 'display:inline' }, class: 'link-like' %>
        </div>

        <div class="todo_item">
            <p><%= todo_item.content %></p>
        </div>

        <div class="trash">
            <%= button_to "Delete", todo_list_todo_item_path(@todo_list, todo_item), method: :delete, data: { confirm: "Are you sure?" }, form: { style: 'display:inline' }, class: 'link-like trash-btn' %>
        </div>
    <% end %>
</div>